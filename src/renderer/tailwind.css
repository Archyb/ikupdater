@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Tokens (accent Apple-ish) ===== */
:root {
  /* Bleu accent macOS/iOS */
  --accent: #0A84FF;
  --accent-600: #0071e3;
  --brand: var(--accent);
}
.dark {
  --accent: #0A84FF; /* même accent en dark */
  --accent-600: #66A8FF;
}

/* ===== Base ===== */
@layer base {
  html, body { @apply h-full; }
}


/* ===== Components ===== */
@layer components {
  .app-header { @apply flex items-center gap-3 px-6 py-3 bg-white dark:bg-slate-900; }

  .brand-title { 
    @apply text-xl md:text-2xl font-semibold select-none;
    color: var(--brand);
  }

  .label { @apply text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400; }

  .muted { @apply opacity-70 text-sm text-slate-500 dark:text-slate-400; }

  .controls {
    @apply px-6 py-3 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800;
  }
  .btn:disabled,
  button[disabled],
  select:disabled,
  .pill[aria-disabled="true"],
  .pill-label:has(input[disabled]) {
    @apply opacity-40 cursor-not-allowed shadow-none;
    filter: none !important;
  }

  /* tooltip simple via title par défaut (déjà géré par navigateur) */

  /* log “vide” plus doux */
  .log:empty::before {
    content: "Aucun log pour l’instant…";
    @apply text-slate-400 dark:text-slate-500;
  }
  .control-row { @apply flex items-center gap-3; }

  /* Inputs / select */
  .field {
    @apply w-40 px-3 py-2 rounded-lg bg-white dark:bg-slate-900 
           border border-slate-300 dark:border-slate-700 
           text-slate-900 dark:text-slate-100
           shadow-sm focus:outline-none focus:ring-4 focus:ring-[color:var(--accent)/.25] 
           focus:border-[color:var(--accent)] transition;
  }

  /* Boutons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-3.5 py-2.5 
           border border-slate-300 dark:border-slate-700 
           bg-white dark:bg-slate-900 
           text-slate-900 dark:text-slate-100 
           shadow-sm transition will-change-transform
           focus:outline-none focus-visible:ring-4 focus-visible:ring-[color:var(--accent)/.3]
           active:scale-[.98] hover:shadow;
  }
  .btn-primary {
    @apply border-transparent text-white;
    background: var(--accent);
  }
  .btn-primary:hover { filter: brightness(.98); }
  .btn-primary:active { filter: brightness(.95); }

  .btn-ghost {
    @apply bg-transparent border-transparent hover:bg-slate-100/70 dark:hover:bg-slate-800/60;
  }

  .actions { @apply flex items-center gap-2 flex-wrap; }

  /* Grid projets */
  .grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
    @apply gap-5;
  }

  /* Cards */
  .card {
    @apply border rounded-2xl overflow-hidden bg-white dark:bg-slate-900/60 
           border-slate-200 dark:border-slate-800 
           shadow-sm hover:shadow-lg transition;
    backdrop-filter: saturate(120%) blur(4px);
  }
  .card-header {
    @apply flex justify-between items-center gap-3 p-4 bg-slate-50/80 dark:bg-slate-900/50;
  }
  .title { @apply font-semibold text-slate-900 dark:text-slate-100; }
  .subtitle { @apply text-xs text-sky-700 dark:text-sky-400; }
  .path { @apply text-[11px] text-slate-500; }

  /* Console */
  .console { @apply px-6 py-3; }
  .console-title { @apply m-0 text-sm font-medium text-slate-600 dark:text-slate-300; }
  .log {
    @apply m-0 p-3 h-44 overflow-auto font-mono text-xs
           bg-white/80 dark:bg-slate-900/70
           text-slate-800 dark:text-indigo-100
           border-t border-slate-200 dark:border-slate-800 rounded-xl;
  }

  /* Pills (checkbox stylisé) */
  .pill { @apply inline-flex items-center select-none; }
  .pill-input { @apply sr-only; }
  .pill-label {
    @apply px-3 py-1.5 rounded-full border text-sm
           border-slate-300 dark:border-slate-700
           bg-white dark:bg-slate-900
           text-slate-700 dark:text-slate-200
           shadow-sm transition cursor-pointer;
  }
  .pill-input:checked + .pill-label {
    color: white;
    border-color: var(--accent);
    background: var(--accent);
    box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 25%, transparent);
  }
  .pill-input:focus-visible + .pill-label {
    outline: none;
    box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 35%, transparent);
  }

  /* Sélecteurs d’actions existants (cohérence couleurs) */
  .actions button[data-action='sync'] { @apply btn btn-primary; }
  .actions button[data-action='git']  { @apply btn; border-color: var(--accent); color: var(--accent); }
  .actions button[data-action='php']  { @apply btn border-indigo-300 text-indigo-500 dark:border-indigo-400 dark:text-indigo-300; }
  .actions button[data-action='node'] { @apply btn border-emerald-300 text-emerald-600 dark:border-emerald-400 dark:text-emerald-300; }
}
